{% extends "base.html" %}
{% load static %}

{% block content %}
  <h1>Blog home page</h1>
  <h2>All posts:</h2>
  {% if all_posts %}
    <ul>
      {% for post in all_posts %}
      <li>
        <ul>
          <a href="{% url 'blog:post-detail' pk=post.id %}">{{ post.title }}</a>
          {% if post.owner %}
            by {{ post.owner.username }}
          {% endif %}
          ({{ post.commentary_set.count }} comments)
        </ul>
        {{ post.content }} ({{ post.created_time }})

      </li>
      {% endfor %}
    </ul>
  {% endif %}
  {% if all_posts.has_other_pages %}
    <ul>
      {% if all_posts.has_previous %}
        <li><a href="?page={{ all_posts.previous_page_number }}">Prev</a></li>
      {% endif %}
      <li><span class="page-link">{{ all_posts.number }}</span></li>
      {% if all_posts.has_next %}
        <li><a href="?page={{ all_posts.next_page_number }}">Next</a></li>
      {% endif %}
    </ul>
  {% endif %}
{% endblock %}